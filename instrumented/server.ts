function cov_1nqlbpi2ag() {
  var path = "/home/dviartseika/verteyko/rs-app-react-ts/src/server.ts";
  var hash = "ca66be50ec8beeafc47414479ce228d94f920dec";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/home/dviartseika/verteyko/rs-app-react-ts/src/server.ts",
    statementMap: {
      "0": {
        start: {
          line: 7,
          column: 18
        },
        end: {
          line: 7,
          column: 62
        }
      },
      "1": {
        start: {
          line: 9,
          column: 14
        },
        end: {
          line: 9,
          column: 23
        }
      },
      "2": {
        start: {
          line: 10,
          column: 15
        },
        end: {
          line: 13,
          column: 4
        }
      },
      "3": {
        start: {
          line: 14,
          column: 43
        },
        end: {
          line: 14,
          column: 90
        }
      },
      "4": {
        start: {
          line: 15,
          column: 2
        },
        end: {
          line: 15,
          column: 28
        }
      },
      "5": {
        start: {
          line: 16,
          column: 2
        },
        end: {
          line: 39,
          column: 5
        }
      },
      "6": {
        start: {
          line: 17,
          column: 16
        },
        end: {
          line: 17,
          column: 31
        }
      },
      "7": {
        start: {
          line: 18,
          column: 4
        },
        end: {
          line: 38,
          column: 5
        }
      },
      "8": {
        start: {
          line: 19,
          column: 21
        },
        end: {
          line: 19,
          column: 86
        }
      },
      "9": {
        start: {
          line: 20,
          column: 6
        },
        end: {
          line: 20,
          column: 62
        }
      },
      "10": {
        start: {
          line: 21,
          column: 19
        },
        end: {
          line: 21,
          column: 54
        }
      },
      "11": {
        start: {
          line: 22,
          column: 25
        },
        end: {
          line: 22,
          column: 75
        }
      },
      "12": {
        start: {
          line: 23,
          column: 23
        },
        end: {
          line: 32,
          column: 8
        }
      },
      "13": {
        start: {
          line: 25,
          column: 10
        },
        end: {
          line: 25,
          column: 29
        }
      },
      "14": {
        start: {
          line: 26,
          column: 10
        },
        end: {
          line: 26,
          column: 20
        }
      },
      "15": {
        start: {
          line: 29,
          column: 10
        },
        end: {
          line: 29,
          column: 29
        }
      },
      "16": {
        start: {
          line: 30,
          column: 10
        },
        end: {
          line: 30,
          column: 20
        }
      },
      "17": {
        start: {
          line: 34,
          column: 6
        },
        end: {
          line: 36,
          column: 7
        }
      },
      "18": {
        start: {
          line: 35,
          column: 8
        },
        end: {
          line: 35,
          column: 33
        }
      },
      "19": {
        start: {
          line: 37,
          column: 6
        },
        end: {
          line: 37,
          column: 14
        }
      },
      "20": {
        start: {
          line: 41,
          column: 2
        },
        end: {
          line: 41,
          column: 62
        }
      },
      "21": {
        start: {
          line: 41,
          column: 32
        },
        end: {
          line: 41,
          column: 60
        }
      },
      "22": {
        start: {
          line: 44,
          column: 0
        },
        end: {
          line: 44,
          column: 15
        }
      }
    },
    fnMap: {
      "0": {
        name: "createServer",
        decl: {
          start: {
            line: 8,
            column: 15
          },
          end: {
            line: 8,
            column: 27
          }
        },
        loc: {
          start: {
            line: 8,
            column: 30
          },
          end: {
            line: 42,
            column: 1
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 16,
            column: 15
          },
          end: {
            line: 16,
            column: 16
          }
        },
        loc: {
          start: {
            line: 16,
            column: 41
          },
          end: {
            line: 39,
            column: 3
          }
        },
        line: 16
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 24,
            column: 8
          },
          end: {
            line: 24,
            column: 9
          }
        },
        loc: {
          start: {
            line: 24,
            column: 23
          },
          end: {
            line: 27,
            column: 9
          }
        },
        line: 24
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 28,
            column: 8
          },
          end: {
            line: 28,
            column: 9
          }
        },
        loc: {
          start: {
            line: 28,
            column: 21
          },
          end: {
            line: 31,
            column: 9
          }
        },
        line: 28
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 41,
            column: 26
          },
          end: {
            line: 41,
            column: 27
          }
        },
        loc: {
          start: {
            line: 41,
            column: 32
          },
          end: {
            line: 41,
            column: 60
          }
        },
        line: 41
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 34,
            column: 6
          },
          end: {
            line: 36,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 6
          },
          end: {
            line: 36,
            column: 7
          }
        }, {
          start: {
            line: 34,
            column: 6
          },
          end: {
            line: 36,
            column: 7
          }
        }],
        line: 34
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0
    },
    b: {
      "0": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "ca66be50ec8beeafc47414479ce228d94f920dec"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1nqlbpi2ag = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1nqlbpi2ag();
import fs from 'fs/promises';
import path from 'path';
import { fileURLToPath } from 'url';
import express from 'express';
import { createServer as createViteServer } from 'vite';
const __dirname = (cov_1nqlbpi2ag().s[0]++, path.dirname(fileURLToPath(import.meta.url)));
async function createServer() {
  cov_1nqlbpi2ag().f[0]++;
  const app = (cov_1nqlbpi2ag().s[1]++, express());
  const vite = (cov_1nqlbpi2ag().s[2]++, await createViteServer({
    server: {
      middlewareMode: true
    },
    appType: 'custom'
  }));
  const {
    SERVER_PORT,
    SERVER_FULL_URL
  } = (cov_1nqlbpi2ag().s[3]++, await vite.ssrLoadModule('./src/server.env.ts'));
  cov_1nqlbpi2ag().s[4]++;
  app.use(vite.middlewares);
  cov_1nqlbpi2ag().s[5]++;
  app.use('*', async (req, res, next) => {
    cov_1nqlbpi2ag().f[1]++;
    const url = (cov_1nqlbpi2ag().s[6]++, req.originalUrl);
    cov_1nqlbpi2ag().s[7]++;
    try {
      let template = (cov_1nqlbpi2ag().s[8]++, await fs.readFile(path.resolve(__dirname, 'index.html'), 'utf-8'));
      cov_1nqlbpi2ag().s[9]++;
      template = await vite.transformIndexHtml(url, template);
      const html = (cov_1nqlbpi2ag().s[10]++, template.split(`<!--ssr-outlet-->`));
      const {
        render
      } = (cov_1nqlbpi2ag().s[11]++, await vite.ssrLoadModule('./src/entry-server.tsx'));
      const {
        pipe
      } = (cov_1nqlbpi2ag().s[12]++, await render(url, {
        onShellReady() {
          cov_1nqlbpi2ag().f[2]++;
          cov_1nqlbpi2ag().s[13]++;
          res.write(html[0]);
          cov_1nqlbpi2ag().s[14]++;
          pipe(res);
        },
        onAllReady() {
          cov_1nqlbpi2ag().f[3]++;
          cov_1nqlbpi2ag().s[15]++;
          res.write(html[1]);
          cov_1nqlbpi2ag().s[16]++;
          res.end();
        }
      }));
    } catch (e) {
      cov_1nqlbpi2ag().s[17]++;
      if (e instanceof Error) {
        cov_1nqlbpi2ag().b[0][0]++;
        cov_1nqlbpi2ag().s[18]++;
        vite.ssrFixStacktrace(e);
      } else {
        cov_1nqlbpi2ag().b[0][1]++;
      }
      cov_1nqlbpi2ag().s[19]++;
      next(e);
    }
  });
  cov_1nqlbpi2ag().s[20]++;
  app.listen(SERVER_PORT, () => {
    cov_1nqlbpi2ag().f[4]++;
    cov_1nqlbpi2ag().s[21]++;
    return console.log(SERVER_FULL_URL);
  });
}
cov_1nqlbpi2ag().s[22]++;
createServer();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMW5xbGJwaTJhZyIsImFjdHVhbENvdmVyYWdlIiwiZnMiLCJwYXRoIiwiZmlsZVVSTFRvUGF0aCIsImV4cHJlc3MiLCJjcmVhdGVTZXJ2ZXIiLCJjcmVhdGVWaXRlU2VydmVyIiwiX19kaXJuYW1lIiwicyIsImRpcm5hbWUiLCJpbXBvcnQiLCJtZXRhIiwidXJsIiwiZiIsImFwcCIsInZpdGUiLCJzZXJ2ZXIiLCJtaWRkbGV3YXJlTW9kZSIsImFwcFR5cGUiLCJTRVJWRVJfUE9SVCIsIlNFUlZFUl9GVUxMX1VSTCIsInNzckxvYWRNb2R1bGUiLCJ1c2UiLCJtaWRkbGV3YXJlcyIsInJlcSIsInJlcyIsIm5leHQiLCJvcmlnaW5hbFVybCIsInRlbXBsYXRlIiwicmVhZEZpbGUiLCJyZXNvbHZlIiwidHJhbnNmb3JtSW5kZXhIdG1sIiwiaHRtbCIsInNwbGl0IiwicmVuZGVyIiwicGlwZSIsIm9uU2hlbGxSZWFkeSIsIndyaXRlIiwib25BbGxSZWFkeSIsImVuZCIsImUiLCJFcnJvciIsImIiLCJzc3JGaXhTdGFja3RyYWNlIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VzIjpbInNlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZnMgZnJvbSAnZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyBmaWxlVVJMVG9QYXRoIH0gZnJvbSAndXJsJztcbmltcG9ydCBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgY3JlYXRlU2VydmVyIGFzIGNyZWF0ZVZpdGVTZXJ2ZXIgfSBmcm9tICd2aXRlJztcblxuY29uc3QgX19kaXJuYW1lID0gcGF0aC5kaXJuYW1lKGZpbGVVUkxUb1BhdGgoaW1wb3J0Lm1ldGEudXJsKSk7XG5hc3luYyBmdW5jdGlvbiBjcmVhdGVTZXJ2ZXIoKSB7XG4gIGNvbnN0IGFwcCA9IGV4cHJlc3MoKTtcbiAgY29uc3Qgdml0ZSA9IGF3YWl0IGNyZWF0ZVZpdGVTZXJ2ZXIoe1xuICAgIHNlcnZlcjogeyBtaWRkbGV3YXJlTW9kZTogdHJ1ZSB9LFxuICAgIGFwcFR5cGU6ICdjdXN0b20nLFxuICB9KTtcbiAgY29uc3QgeyBTRVJWRVJfUE9SVCwgU0VSVkVSX0ZVTExfVVJMIH0gPSBhd2FpdCB2aXRlLnNzckxvYWRNb2R1bGUoJy4vc3JjL3NlcnZlci5lbnYudHMnKTtcbiAgYXBwLnVzZSh2aXRlLm1pZGRsZXdhcmVzKTtcbiAgYXBwLnVzZSgnKicsIGFzeW5jIChyZXEsIHJlcywgbmV4dCkgPT4ge1xuICAgIGNvbnN0IHVybCA9IHJlcS5vcmlnaW5hbFVybDtcbiAgICB0cnkge1xuICAgICAgbGV0IHRlbXBsYXRlID0gYXdhaXQgZnMucmVhZEZpbGUocGF0aC5yZXNvbHZlKF9fZGlybmFtZSwgJ2luZGV4Lmh0bWwnKSwgJ3V0Zi04Jyk7XG4gICAgICB0ZW1wbGF0ZSA9IGF3YWl0IHZpdGUudHJhbnNmb3JtSW5kZXhIdG1sKHVybCwgdGVtcGxhdGUpO1xuICAgICAgY29uc3QgaHRtbCA9IHRlbXBsYXRlLnNwbGl0KGA8IS0tc3NyLW91dGxldC0tPmApO1xuICAgICAgY29uc3QgeyByZW5kZXIgfSA9IGF3YWl0IHZpdGUuc3NyTG9hZE1vZHVsZSgnLi9zcmMvZW50cnktc2VydmVyLnRzeCcpO1xuICAgICAgY29uc3QgeyBwaXBlIH0gPSBhd2FpdCByZW5kZXIodXJsLCB7XG4gICAgICAgIG9uU2hlbGxSZWFkeSgpIHtcbiAgICAgICAgICByZXMud3JpdGUoaHRtbFswXSk7XG4gICAgICAgICAgcGlwZShyZXMpO1xuICAgICAgICB9LFxuICAgICAgICBvbkFsbFJlYWR5KCkge1xuICAgICAgICAgIHJlcy53cml0ZShodG1sWzFdKTtcbiAgICAgICAgICByZXMuZW5kKCk7XG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHZpdGUuc3NyRml4U3RhY2t0cmFjZShlKTtcbiAgICAgIH1cbiAgICAgIG5leHQoZSk7XG4gICAgfVxuICB9KTtcblxuICBhcHAubGlzdGVuKFNFUlZFUl9QT1JULCAoKSA9PiBjb25zb2xlLmxvZyhTRVJWRVJfRlVMTF9VUkwpKTtcbn1cblxuY3JlYXRlU2VydmVyKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBZVk7SUFBQUEsY0FBQSxZQUFBQSxDQUFBO01BQUEsT0FBQUMsY0FBQTtJQUFBO0VBQUE7RUFBQSxPQUFBQSxjQUFBO0FBQUE7QUFBQUQsY0FBQTtBQWZaLE9BQU9FLEVBQUUsTUFBTSxhQUFhO0FBQzVCLE9BQU9DLElBQUksTUFBTSxNQUFNO0FBQ3ZCLFNBQVNDLGFBQWEsUUFBUSxLQUFLO0FBQ25DLE9BQU9DLE9BQU8sTUFBTSxTQUFTO0FBQzdCLFNBQVNDLFlBQVksSUFBSUMsZ0JBQWdCLFFBQVEsTUFBTTtBQUV2RCxNQUFNQyxTQUFTLElBQUFSLGNBQUEsR0FBQVMsQ0FBQSxPQUFHTixJQUFJLENBQUNPLE9BQU8sQ0FBQ04sYUFBYSxDQUFDTyxNQUFN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